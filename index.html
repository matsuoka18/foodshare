\<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>フードロスなくし隊</title>
  </head>
  <body>
    <h1>フードロスなくしin港南台</h1>
    <input type="text" id="shopname" placeholder="店舗名を入力" value="">
        <input type="text" id="menuname" placeholder="商品名を入力" value="">
        <input type="text" id="fee" placeholder="商品の価格を入力" value="">
        <input type="text" id="express" placeholder="商品の説明を入力" value="">
        <p id="menu"></p>
        <p id="count"></p>

    <button onclick="start()">店舗名を登録する</button>
    <button onclick="start3()">商品名を追加する</button>
    <button onclick="start2()">商品名を登録を終了する</button>
        <button onclick="jike()">商品名を登録</button>
    <p id="p1"></p>
    <p id="p2"></p>
    <h1>店舗・商品名の変更・削除</h1>
    <input type="number" id="shopID" placeholder="店舗番号を入力" value="">
   <input type="text" id="shopchange" placeholder="店舗名を変更する" value="">
       <input type="text" id="menunamechange" placeholder="商品名を変更" value="">
       <input type="text" id="feechange" placeholder="商品の価格を変更" value="">
       <input type="text" id="expresschange" placeholder="商品の説明を変更" value="">
       <button onclick="think()">変更・削除</button>
       <button onclick="change()">店舗名などを追加する</button>
       <button onclick="change2()">商品名などの追加終了</button>
       <button onclick="change3()">編集</button>
       <button onclick="change4()">商品説明を変更</button>
       <button onclick="hide()">隠す</button>
       <button onclick="delet()">削除する</button>
       <div class="all1" id="all1"> <!--nh1 np1~3 np11~33-->
       <div class="n2" id="n1">
       <input type="text"class="nh1" id="nh1"value="ローソン"></input>

       <div class="nn2">
         <input type="text"class="np1" id="np1"value="Lチキ旨辛"></input>
         <input type="text"class="np1" id="np11"value="250円"></input>
     </div>
            <img src="sakura.jpeg">
            <input type="text"class="np3" id="np111"value="ジューシーで美味しい"></input>
            <button onclick="changeend()">編集を終了</button>
       </div>
       <div class="n1" id="n1">
       <h1 class="nh1" id="nh11">ローソン</h1>

       <div class="nn1">
       <p class="np1" id="np1_1">Lチキ旨辛</p>
       <p class="np2" id="np2_2">250円</p>
     </div>
            <img src="sakura.jpeg">
                   <p class="np3" id="np3_3">ジューシーで美味しい</p>
                   <p>完成型</p>
       </div>
     </div>

     <div class="all2" id="all2"> <!--nh2 np4~6 np44~66-->
       <div class="n2" id="n1">
       <input type="text"class="nh1" id="nh2"value="ローソン"></input>

       <div class="nn2">
         <input type="text"class="np1" id="np2"value="Lチキ旨辛"></input>
         <input type="text"class="np1" id="np22"value="250円"></input>
     </div>
            <img src="sakura.jpeg">
            <input type="text"class="np3" id="np222"value="ジューシーで美味しい"></input>
            <button onclick="changeend()">編集を終了</button>
       </div>
       <div class="n1" id="n1">
       <h1 class="nh1" id="nh11">ローソン</h1>

       <div class="nn1">
       <p class="np1" id="np44">Lチキ旨辛</p>
       <p class="np2" id="np55">250円</p>
     </div>
            <img src="sakura.jpeg">
                   <p class="np3" id="np66">ジューシーで美味しい</p>
                   <p>完成型</p>
       </div>
     </div>
     <div class="all3" id="all3"> <!--nh3 np7~9 np77~99-->
       <div class="n2" id="n1">
       <input type="text"class="nh1" id="nh3"value="ローソン"></input>

       <div class="nn2">
         <input type="text"class="np1" id="np3"value="Lチキ旨辛"></input>
         <input type="text"class="np1" id="np33"value="250円"></input>
     </div>
            <img src="sakura.jpeg">
            <input type="text"class="np3" id="np333"value="ジューシーで美味しい"></input>
            <button onclick="changeend()">編集を終了</button>
       </div>
       <div class="n1" id="n1">
       <h1 class="nh1" id="nh11">ローソン</h1>

       <div class="nn1">
       <p class="np1" id="np88">Lチキ旨辛</p>
       <p class="np2" id="np99">250円</p>
     </div>
            <img src="sakura.jpeg">
                   <p class="np3" id="np110">ジューシーで美味しい</p>
                   <p>完成型</p>
       </div>
     </div>
     <div class="all4" id="all4"> <!--nh4 np11~13 np111~113-->
       <div class="n2" id="n1">
       <input type="text"class="nh1" id="nh4"value="ローソン"></input>

       <div class="nn2">
         <input type="text"class="np1" id="np4"value="Lチキ旨辛"></input>
         <input type="text"class="np1" id="np44"value="250円"></input>
       </div>
            <img src="sakura.jpeg">
            <input type="text"class="np3" id="np444"value="ジューシーで美味しい"></input>
            <button onclick="changeend()">編集を終了</button>
       </div>
       <div class="n1" id="n1">
       <h1 class="nh1" id="nh11">ローソン</h1>

       <div class="nn1">
       <p class="np1" id="np111">Lチキ旨辛</p>
       <p class="np2" id="np112">250円</p>
       </div>
            <img src="sakura.jpeg">
                   <p class="np3" id="np113">ジューシーで美味しい</p>
                   <p>完成型</p>
       </div>
     </div>
     <div class="all5" id="all5"> <!--nh5 np14~16 np114~116-->
       <div class="n2" id="n1">
       <input type="text"class="nh1" id="nh5"value="ローソン"></input>

       <div class="nn2">
         <input type="text"class="np1" id="np5"value="Lチキ旨辛"></input>
         <input type="text"class="np1" id="np55"value="250円"></input>
       </div>
            <img src="sakura.jpeg">
            <input type="text"class="np3" id="np555"value="ジューシーで美味しい"></input>
            <button onclick="changeend()">編集を終了</button>
       </div>
       <div class="n1" id="n1">
       <h1 class="nh1" id="nh11">ローソン</h1>

       <div class="nn1">
       <p class="np1" id="np114">Lチキ旨辛</p>
       <p class="np2" id="np115">250円</p>
       </div>
            <img src="sakura.jpeg">
                   <p class="np3" id="np116">ジューシーで美味しい</p>
                   <p>完成型</p>
       </div>
     </div>
     <div class="all6" id="all6"> <!--nh6 np17~19 np117~119-->
       <div class="n2" id="n1">
       <input type="text"class="nh1" id="nh6"value="ローソン"></input>

       <div class="nn2">
         <input type="text"class="np1" id="np6"value="Lチキ旨辛"></input>
         <input type="text"class="np1" id="np66"value="250円"></input>
       </div>
            <img src="sakura.jpeg">
            <input type="text"class="np3" id="np666"value="ジューシーで美味しい"></input>
            <button onclick="changeend()">編集を終了</button>
       </div>
       <div class="n1" id="n1">
       <h1 class="nh1" id="nh11">ローソン</h1>

       <div class="nn1">
       <p class="np1" id="np117">Lチキ旨辛</p>
       <p class="np2" id="np118">250円</p>
       </div>
            <img src="sakura.jpeg">
                   <p class="np3" id="np119">ジューシーで美味しい</p>
                   <p>完成型</p>
       </div>
     </div>
     <div class="all7" id="all7"> <!--nh7 np20~22 np120~122-->
       <div class="n2" id="n1">
       <input type="text"class="nh1" id="nh7"value="ローソン"></input>

       <div class="nn2">
         <input type="text"class="np1" id="np7"value="Lチキ旨辛"></input>
         <input type="text"class="np1" id="np77"value="250円"></input>
       </div>
            <img src="sakura.jpeg">
            <input type="text"class="np3" id="np777"value="ジューシーで美味しい"></input>
            <button onclick="changeend()">編集を終了</button>
       </div>
       <div class="n1" id="n1">
       <h1 class="nh1" id="nh11">ローソン</h1>

       <div class="nn1">
       <p class="np1" id="np120">Lチキ旨辛</p>
       <p class="np2" id="np121">250円</p>
       </div>
            <img src="sakura.jpeg">
                   <p class="np3" id="np122">ジューシーで美味しい</p>
                   <p>完成型</p>
       </div>
     </div>
     <div class="all8" id="all8">  <!--nh8 np23~25 np123~125-->
       <div class="n2" id="n1">
       <input type="text"class="nh1" id="nh8"value="ローソン"></input>

       <div class="nn2">
         <input type="text"class="np1" id="np8"value="Lチキ旨辛"></input>
         <input type="text"class="np1" id="np88"value="250円"></input>
       </div>
            <img src="sakura.jpeg">
            <input type="text"class="np3" id="np888"value="ジューシーで美味しい"></input>
            <button onclick="changeend()">編集を終了</button>
       </div>
       <div class="n1" id="n1">
       <h1 class="nh1" id="nh11">ローソン</h1>

       <div class="nn1">
       <p class="np1" id="np123">Lチキ旨辛</p>
       <p class="np2" id="np124">250円</p>
       </div>
            <img src="sakura.jpeg">
                   <p class="np3" id="np125">ジューシーで美味しい</p>
                   <p>完成型</p>
       </div>
     </div>
 <div class="all9" id="all9"> <!--nh9 np26~28 np126~128-->
       <div class="n2" id="n1">
       <input type="text"class="nh1" id="nh9"value="ローソン"></input>

       <div class="nn2">
         <input type="text"class="np1" id="np9"value="Lチキ旨辛"></input>
         <input type="text"class="np1" id="np99"value="250円"></input>
       </div>
            <img src="sakura.jpeg">
            <input type="text"class="np3" id="np999"value="ジューシーで美味しい"></input>
            <button onclick="changeend()">編集を終了</button>
       </div>
       <div class="n1" id="n1">
       <h1 class="nh1" id="nh11">ローソン</h1>

       <div class="nn1">
       <p class="np1" id="np126">Lチキ旨辛</p>
       <p class="np2" id="np127">250円</p>
       </div>
            <img src="sakura.jpeg">
                   <p class="np3" id="np128">ジューシーで美味しい</p>
                   <p>完成型</p>
       </div>
     </div>
 <div class="all10" id="all10"> <!--nh10 np29~31 np129~131-->
       <div class="n2" id="n1">
       <input type="text"class="nh1" id="nh10"value="ローソン"></input>
       <div class="nn2">
         <input type="text"class="np1" id="np10"value="Lチキ旨辛"></input>
         <input type="text"class="np1" id="np1010"value="250円"></input>
       </div>
            <img src="sakura.jpeg">
            <input type="text"class="np3" id="np101010"value="ジューシーで美味しい"></input>
            <button onclick="changeend()">編集を終了</button>
       </div>
       <div class="n1" id="n1">
       <h1 class="nh1" id="nh11">ローソン</h1>

       <div class="nn1">
       <p class="np1" id="np129">Lチキ旨辛</p>
       <p class="np2" id="np130">250円</p>
       </div>
            <img src="sakura.jpeg">
                   <p class="np3" id="np131">ジューシーで美味しい</p>
                   <p>完成型</p>
       </div>
     </div>

       <style>
       .n1{
         border:1px solid;
         width:40vw;
         height:25vw;
       }
       .n1 p {
         padding-bottom: 0px;
         margin-bottom: 0px;
         padding-right:10px;

       }
       .n1 h1{
         padding-bottom:0;
         margin-bottom:0;
         margin-top:0;
         padding-top:5;
       }
       .n1 img{
         width:25vw;
         float:right;
       }
       .nn1{
         display:flex;
          font-size:25px;
       }
       .nh1{
         border:none;
         font-size:25px;
         font-weight:bold;
       }
       .n2{
         border:1px solid;
         width:40vw;
         height:25vw;
         margin-right:5vw;
         float:right;
       }
       .n2 p {
         padding-bottom: 0px;
         margin-bottom: 0px;
         padding-right:10px;

       }
       .n2 h1{
         padding-bottom:0;
         margin-bottom:0;
         margin-top:0;
         padding-top:5;
       }
       .n2 img{
         width:25vw;
         float:right;
       }
       .nn2{
         display:flex;
          font-size:25px;
       }
       .np1{
         border:none;
         font-size:25px;
         margin-top:10px;
       }
       .np3{
         border:none;
         font-size:15px;
         margin-top:10px;
       }
       </style>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
    function delet(){
      var url = "https://script.google.com/macros/s/AKfycby2w2Dt2VtADouEBQSpOJR2M4GG35HwW2gIg0EwGw2wOujflbmXcWGkH-R114bZF08/exec";
      var data = [{
        "name4":"削除",
        "name5":document.getElementById("shopID").value
      }];
      var params = {
        "method":"post",
        "mode":"no-cors",
        "Content-Type":"application/json",
        "body":JSON.stringify(data)
      }
fetch(url, params)
}
    function hide(){
      alert();
      document.getElementById('all4').style.visibility = "hidden";
    }
    //編集エリア
    var shop = document.getElementById("nh1").value;
    document.getElementById("nh1").addEventListener('keyup',shop1);
    function shop1(){
          var shop = document.getElementById("nh1").value;
      document.getElementById("nh11").innerHTML = shop;
    }
    var menu = document.getElementById("np1").value;
    document.getElementById("np1").addEventListener('keyup',shop2);
    function shop2(){
          var menu = document.getElementById("np1").value;
      document.getElementById("np1_1").innerHTML = menu;
    }
    var fee = document.getElementById("np11").value;
    document.getElementById("np11").addEventListener('keyup',shop3);
    function shop3(){
      var fee = document.getElementById("np11").value;
  document.getElementById("np2_2").innerHTML = fee;
    }
    var express = document.getElementById("np111").value;
    document.getElementById("np111").addEventListener('keyup',shop4);
    function shop4(){
          var express = document.getElementById("np111").value;
      document.getElementById("np3_3").innerHTML = express;
    }
    function change3(){
      shopID = document.getElementById("shopID").value;
      var url = "https://script.google.com/macros/s/AKfycby2w2Dt2VtADouEBQSpOJR2M4GG35HwW2gIg0EwGw2wOujflbmXcWGkH-R114bZF08/exec";
      var data = [
        {
          "name4":"編集",
          "name5":shopID
        }
      ];
      var params = {
        "method":"post",
        "mode":"no-cors",
        "Content-Type":"application/json",
        "body":JSON.stringify(data)
      }
      fetch(url, params)
      fetch('https://script.google.com/macros/s/AKfycby2w2Dt2VtADouEBQSpOJR2M4GG35HwW2gIg0EwGw2wOujflbmXcWGkH-R114bZF08/exec', {
          method: "GET",
          mode: "cors"
        })
        .then(response => {
          if (response.ok) {
            return response.json();
          }
          // 404 や 500 ステータスならここに到達する
          throw new Error('Network response was not ok.');
        })
        .then(resJson => {
          var text = JSON.stringify(resJson);
          last = text.slice(-4,-3);
          last = parseInt(last);
          last2 = 10-last;
          alert(last2);
          for(var i = 10; i>last; i--){
          va = "all"+i;
          document.getElementById(va).style.visibility = "hidden";
          }
          document.getElementById("p1").innerHTML = text;
          text = JSON.parse(text);
          for(var i = 1; i<last+1; i++){
         shopvar = "nh"+i;
         menuvar = "np"+i;
         fee = "np"+i+i;
         express = "np"+i+i+i;
  tete = text.shopdata[0];
  te = "n"+shopID;
  tete2 = text.change[0];
  menu = "menu"+i;
  fee2= "fee"+i;
  express2 = "express"+i;
    console.log(tete[te]);
  document.getElementById(shopvar).value = tete[te];
  document.getElementById(menuvar).value = tete2[menu];
  document.getElementById(fee).value = tete2[fee2];
  document.getElementById(express).value = tete2[express2];
          }

                   shopPosi = text.change[0].position1;

           //return{shopPosi:shopPosi};
      })
        .catch(error => {
          // ネットワークエラーの場合はここに到達する
          console.error(error);
        })
    }

    function changeend(change3){
            var shop = document.getElementById("nh1").value;
        document.getElementById("nh11").innerHTML = shop;
        var menu = document.getElementById("np1").value;
    document.getElementById("np11").innerHTML = menu;
    var fee = document.getElementById("np2").value;
document.getElementById("np22").innerHTML = fee;
var express = document.getElementById("np111").value;
document.getElementById("np33").innerHTML = express;
/*var a = change3();
var shopPosi2 = a.shopPosi;*/
shopPosi = String(shopPosi);
var url = "https://script.google.com/macros/s/AKfycby2w2Dt2VtADouEBQSpOJR2M4GG35HwW2gIg0EwGw2wOujflbmXcWGkH-R114bZF08/exec";
var data = [{
  "name":shop,
  "name1":menu,
  "name2":fee,
  "name3":express,
  "name4":"編集追加",
  "name5":shopID,
  "name6":shopPosi
}];
console.log(data);
 var params ={
   "method":"post",
   "mode":"no-cors",
   "Content-Type":"application/json",
   "body":JSON.stringify(data)
 }
 console.log(data);
 fetch(url,params)
    }
    //ここまで
    //new url https://script.google.com/macros/s/AKfycbwJ28vF9SHSU8dPFWeFtSnwffyW18azKkgYeFiHT2BXNcISBMZTQD5MGM_j9x0/exec
　　var count = 0;
   var count1 = 0;

function change2(){
  var url = "https://script.google.com/macros/s/AKfycby2w2Dt2VtADouEBQSpOJR2M4GG35HwW2gIg0EwGw2wOujflbmXcWGkH-R114bZF08/exec";
  var data = [
    {
      "name4":"追加終了"
    }
  ];
  var params = {
    "method":"post",
    "mode":"no-cors",
    "Content-Type":"application/json",
    "body":JSON.stringify(data)
  }
  fetch(url, params)
}

   function change(){//店舗名などの情報の追加編集のデモ制作
     var shopchange = document.getElementById("shopchange").value;
     var menunamechange = document.getElementById("menunamechange").value;
     var feechange = document.getElementById("feechange").value;
     var expresschange = document.getElementById("expresschange").value;
     var shopID = document.getElementById("shopID").value;
     alert(shopID);
     var url = "https://script.google.com/macros/s/AKfycby2w2Dt2VtADouEBQSpOJR2M4GG35HwW2gIg0EwGw2wOujflbmXcWGkH-R114bZF08/exec";
     var data = [
       {
         "name1":menunamechange,
         "name2":feechange,
         "name3":expresschange,
         "name4":"追加",
         "name5":shopID
       }
     ];
     var params = {
       "method":"post",
       "mode":"no-cors",
       "Content-Type":"application/json",
       "body":JSON.stringify(data)
     }
     fetch(url, params)
   }
   function think(){
     var shopID = document.getElementById("shopID").value;
     fetch('https://script.google.com/macros/s/AKfycby2w2Dt2VtADouEBQSpOJR2M4GG35HwW2gIg0EwGw2wOujflbmXcWGkH-R114bZF08/exec', {
         method: "GET",
         mode: "cors"
       })
       .then(response => {
         if (response.ok) {
           return response.json();
         }
         // 404 や 500 ステータスならここに到達する
         throw new Error('Network response was not ok.');
       })
       .then(resJson => {
         var text = JSON.stringify(resJson);
         text = JSON.parse(text);
         console.log(text);
       think2();
     })
       .catch(error => {
         // ネットワークエラーの場合はここに到達する
         console.error(error);
       })
   }
function think2(){
  alert(text);
}
   function jike(){
   fetch('https://script.google.com/macros/s/AKfycby2w2Dt2VtADouEBQSpOJR2M4GG35HwW2gIg0EwGw2wOujflbmXcWGkH-R114bZF08/exec', {
       method: "GET",
       mode: "cors"
     })
     .then(response => {
       if (response.ok) {
         return response.json();
       }
       // 404 や 500 ステータスならここに到達する
       throw new Error('Network response was not ok.');
     })
     .then(resJson => {
       console.log(JSON.stringify(resJson));
     })
     .catch(error => {
       // ネットワークエラーの場合はここに到達する
       console.error(error);
     })
 }

    function start3(){
    var　menu = document.getElementById("menuname").value;
    var fee = document.getElementById("fee").value;
    var express = document.getElementById("express").value;
    var url = "https://script.google.com/macros/s/AKfycby2w2Dt2VtADouEBQSpOJR2M4GG35HwW2gIg0EwGw2wOujflbmXcWGkH-R114bZF08/exec";
    var data = [{
      "name1":menu,
      "name2":fee,
      "name3":express,
      "name4":"入力"
    }];
    console.log(data);
    var params = {
      "method":"post",
      "mode": "no-cors",
      "Content-Type":"application/json",
      "body":JSON.stringify(data),
    }
fetch(url,params)
document.getElementById("express").value="";
document.getElementById("fee").value="";
 document.getElementById("menuname").value="";
}


      function start2(){
      alert("dg");
      var url = "https://script.google.com/macros/s/AKfycby2w2Dt2VtADouEBQSpOJR2M4GG35HwW2gIg0EwGw2wOujflbmXcWGkH-R114bZF08/exec";
      var data = [{
        "name4":"終了"
      }];
      var params = {
        "method":"post",
        "mode": "no-cors",
        "Content-Type":"application/json",
        "body":JSON.stringify(data),
      }
fetch(url,params)
}

function start(){
  alert("de");
  var shop = document.getElementById("shopname").value;
      var url = "https://script.google.com/macros/s/AKfycby2w2Dt2VtADouEBQSpOJR2M4GG35HwW2gIg0EwGw2wOujflbmXcWGkH-R114bZF08/exec";
      var data = [{
        "name":shop,
        "name4":"店舗"
      }];
      var params = {
        "method":"post",
        "mode": "no-cors",
        "Content-Type":"application/json",
        "body":JSON.stringify(data),
      }
fetch(url,params)
document.getElementById("shopname").value = "";
}

    </script>
    </body>
</html>
